<div class="min-h-screen bg-[#F6F8FC] flex flex-col justify-center py-12 sm:px-6 lg:px-8">
    <div class="sm:mx-auto sm:w-full sm:max-w-md">
      <!-- Logo / Titre -->
      <div class="text-center mb-6">
        <img
          class="mx-auto h-10 w-auto"
          src="https://tailwindui.com/plus/img/logos/mark.svg?color=indigo&shade=600"
          alt="Your Company"
        >
        <h2 class="mt-4 text-2xl font-bold text-gray-900">
          Inscription
        </h2>
      </div>
  
      <!-- STEP INDICATOR (Stepper) -->
      <div class="flex items-center justify-center mb-6">
        <!-- Étape 1 -->
        <div class="flex flex-col items-center">
          <div
            class="w-10 h-10 rounded-full border-2 flex items-center justify-center"
            [ngClass]="{
              'border-blue-600 bg-blue-100': currentStep >= 1,
              'border-gray-300 bg-white': currentStep < 1
            }"
          >
            <ng-container *ngIf="currentStep > 1">
              <!-- Icône check -->
              <svg
                class="w-5 h-5 text-blue-600"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                viewBox="0 0 24 24"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M5 13l4 4L19 7"></path>
              </svg>
            </ng-container>
            <ng-container *ngIf="currentStep === 1">
              1
            </ng-container>
          </div>
          <span class="mt-2 text-xs text-gray-600 text-center">Informations<br>personnelles</span>
        </div>
  
        <!-- Trait séparateur -->
        <div
          class="flex-1 h-0.5 mx-2"
          [ngClass]="{
            'bg-blue-600': currentStep > 1,
            'bg-gray-200': currentStep <= 1
          }"
        ></div>
  
        <!-- Étape 2 -->
        <div class="flex flex-col items-center">
          <div
            class="w-10 h-10 rounded-full border-2 flex items-center justify-center"
            [ngClass]="{
              'border-blue-600 bg-blue-100': currentStep >= 2,
              'border-gray-300 bg-white': currentStep < 2
            }"
          >
            <ng-container *ngIf="currentStep > 2">
              <svg
                class="w-5 h-5 text-blue-600"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                viewBox="0 0 24 24"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M5 13l4 4L19 7"></path>
              </svg>
            </ng-container>
            <ng-container *ngIf="currentStep === 2">
              2
            </ng-container>
            <ng-container *ngIf="currentStep < 2">
              2
            </ng-container>
          </div>
          <span class="mt-2 text-xs text-gray-600 text-center">Identifiants</span>
        </div>
  
        <!-- Trait séparateur -->
        <div
          class="flex-1 h-0.5 mx-2"
          [ngClass]="{
            'bg-blue-600': currentStep > 2,
            'bg-gray-200': currentStep <= 2
          }"
        ></div>
  
        <!-- Étape 3 -->
        <div class="flex flex-col items-center">
          <div
            class="w-10 h-10 rounded-full border-2 flex items-center justify-center"
            [ngClass]="{
              'border-blue-600 bg-blue-100': currentStep >= 3,
              'border-gray-300 bg-white': currentStep < 3
            }"
          >
            <ng-container *ngIf="currentStep > 3">
              <svg
                class="w-5 h-5 text-blue-600"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                viewBox="0 0 24 24"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M5 13l4 4L19 7"></path>
              </svg>
            </ng-container>
            <ng-container *ngIf="currentStep === 3">
              3
            </ng-container>
            <ng-container *ngIf="currentStep < 3">
              3
            </ng-container>
          </div>
          <span class="mt-2 text-xs text-gray-600 text-center">Entreprise</span>
        </div>
      </div>
  
      <!-- Carte du formulaire -->
      <div class="bg-white shadow-md rounded-lg p-6">
        <div *ngIf="errorMessage" class="mb-4 text-red-600 text-sm text-center">
          {{ errorMessage }}
        </div>
  
        <form [formGroup]="registerForm" (ngSubmit)="submit()" class="space-y-6">
          <!-- Étape 1 : Nom et Prénom -->
          <div *ngIf="currentStep === 1">
            <div>
              <label for="nom" class="block text-sm font-medium text-gray-700">
                Nom
              </label>
              <input
                id="nom"
                formControlName="nom"
                type="text"
                required
                class="mt-1 block w-full rounded-lg border border-gray-300 px-3 py-2
                       shadow-sm focus:border-blue-600 focus:ring-blue-600 sm:text-sm"
              >
            </div>
  
            <div class="mt-4">
              <label for="prenom" class="block text-sm font-medium text-gray-700">
                Prénom
              </label>
              <input
                id="prenom"
                formControlName="prenom"
                type="text"
                required
                class="mt-1 block w-full rounded-lg border border-gray-300 px-3 py-2
                       shadow-sm focus:border-blue-600 focus:ring-blue-600 sm:text-sm"
              >
            </div>
          </div>
  
          <!-- Étape 2 : E-mail et Password -->
<div *ngIf="currentStep === 2">
    <div>
      <label for="email" class="block text-sm font-medium text-gray-700">E-mail</label>
      <input
        id="email"
        formControlName="email"
        type="email"
        required
        class="mt-1 block w-full rounded-lg border border-gray-300 px-3 py-2
               shadow-sm focus:border-blue-600 focus:ring-blue-600 sm:text-sm"
      >
    </div>
  
    <div class="mt-4 relative">
        <label for="password" class="block text-sm font-medium text-gray-700">
          Mot de passe
        </label>
        
        <!-- Input avec icône pour afficher/masquer le mot de passe -->
        <div class="relative mt-1">
          <!-- Champ mot de passe -->
          <input
            id="password"
            formControlName="password"
            [type]="showPassword ? 'text' : 'password'"
            required
            class="block w-full rounded-lg border border-gray-300 px-3 py-2
                   shadow-sm focus:border-blue-600 focus:ring-blue-600 sm:text-sm"
          >
          
          <!-- Bouton/icône pour toggler -->
          <button
            type="button"
            (click)="togglePasswordVisibility()"
            class="absolute inset-y-0 right-0 flex items-center px-2 text-gray-500 hover:text-gray-700"
            tabindex="-1"
          >
            <!-- Icône "œil ouvert" si le mot de passe est masqué -->
            <svg
              *ngIf="!showPassword"
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M15 12a3 3 0 0 1-6 0 3 3 0 0 1 6 0z"
              />
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"
              />
            </svg>
            
            <!-- Icône "œil barré" si le mot de passe est affiché -->
            <svg
              *ngIf="showPassword"
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M13.875 18.825 12 17.25l-1.875 1.575M12 15.75a3.75 3.75 0 0 1-3.75-3.75 3.75 3.75 0 0 1 3.75-3.75m0 7.5 1.875-1.575L12 10.5l-1.875 1.575m0 0L5.106 7.313M18.894 7.313 12 12l1.875 1.575M2.458 12C3.732 7.943 7.523 5 12 5c1.507 0 2.954.368 4.255 1.02M21.542 12a10.964 10.964 0 0 1-1.452 2.257"
              />
            </svg>
          </button>
        </div>
      </div>
  
    <!-- Bloc de validation dynamique du mot de passe -->
    <div class="mt-4 space-y-2">
      <!-- Critère 1 : longueur >= 8 -->
      <div class="flex items-center"
           [ngClass]="{ 'text-green-600': isMinLength, 'text-gray-500': !isMinLength }">
        <!-- Icône check si valide -->
        <svg *ngIf="isMinLength" class="w-6 h-6 mr-2" fill="none" stroke="currentColor" stroke-width="2"
             viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
          <path d="M5 13l4 4L19 7"></path>
        </svg>
        <!-- Sinon, vous pouvez afficher un autre icône, ou rien -->
        <span>Minimum 8 caractères</span>
      </div>
  
      <!-- Critère 2 : contient un chiffre -->
      <div class="flex items-center"
           [ngClass]="{ 'text-green-600': hasDigit, 'text-gray-500': !hasDigit }">
        <svg *ngIf="hasDigit" class="w-6 h-6 mr-2" fill="none" stroke="currentColor" stroke-width="2"
             viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
          <path d="M5 13l4 4L19 7"></path>
        </svg>
        <span>Au moins un chiffre</span>
      </div>
  
      <!-- Critère 3 : contient un caractère spécial -->
      <div class="flex items-center"
           [ngClass]="{ 'text-green-600': hasSpecialChar, 'text-gray-500': !hasSpecialChar }">
        <svg *ngIf="hasSpecialChar" class="w-6 h-6 mr-2" fill="none" stroke="currentColor" stroke-width="2"
             viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
          <path d="M5 13l4 4L19 7"></path>
        </svg>
        <span>Au moins un caractère spécial</span>
      </div>
    </div>
  </div>
  
          <!-- Étape 3 : Téléphone & Nom d'entreprise -->
          <div *ngIf="currentStep === 3">
            <div>
              <label for="telephone" class="block text-sm font-medium text-gray-700">
                Téléphone
              </label>
              <input
                id="telephone"
                formControlName="telephone"
                type="text"
                required
                class="mt-1 block w-full rounded-lg border border-gray-300 px-3 py-2
                       shadow-sm focus:border-blue-600 focus:ring-blue-600 sm:text-sm"
              >
            </div>
  
            <div class="mt-4">
              <label for="nomEntreprise" class="block text-sm font-medium text-gray-700">
                Nom d'entreprise
              </label>
              <input
                id="nomEntreprise"
                formControlName="nomEntreprise"
                type="text"
                required
                class="mt-1 block w-full rounded-lg border border-gray-300 px-3 py-2
                       shadow-sm focus:border-blue-600 focus:ring-blue-600 sm:text-sm"
              >
            </div>
          </div>
  
          <!-- Boutons de navigation -->
          <div class="flex justify-between">
            <!-- Bouton Précédent -->
            <button
              type="button"
              (click)="previousStep()"
              [disabled]="currentStep === 1"
              class="px-4 py-2 rounded-lg bg-gray-300 text-gray-800 hover:bg-gray-400 transition disabled:opacity-50"
            >
              Précédent
            </button>
  
            <div>
              <!-- Bouton Suivant -->
              <button
  type="button"
  *ngIf="currentStep < 3"
  (click)="nextStep()"
  [disabled]="currentStep === 2 && !isPasswordValid"
  class="px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-500 transition disabled:opacity-50"
>
  Suivant
</button>
  
              <!-- Bouton Inscription (étape 3) -->
              <button
                type="submit"
                *ngIf="currentStep === 3"
                class="px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-500 transition"
              >
                Inscription
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
  